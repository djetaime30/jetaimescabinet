<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jetaime’s Cabinet of Possibilities • Eternal Archive</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Jetaime’s Cabinet of Possibilities — a living archive of daily dream-collages. Every door stays open forever.">
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="manifest" href="data:application/manifest+json,{
  \"name\":\"Jetaime’s Cabinet of Possibilities\",
  \"short_name\":\"Cabinet\",
  \"start_url\":\".\",
  \"display\":\"standalone\",
  \"background_color\":\"#0b0e1a\",
  \"theme_color\":\"#b89f6e\",
  \"icons\":[{\"src\":\"favicon.ico\",\"sizes\":\"64x64\",\"type\":\"image/x-icon\"}]
}">
<style>
:root{--bg:#0b0e1a;--grad:#121525;--text:#e8d9c0;--accent:#b89f6e;--glow:rgba(184,159,110,0.4);--particle:rgba(184,159,110,0.3);}html{scroll-behavior:smooth;}body{font-family:georgia,serif;background:var(--bg);color:var(--text);margin:0;padding:20px 10px;min-height:100vh;transition:all 1.8s ease;}a{transition:opacity .4s;}a:active{opacity:0.7;}h1{font-size:2.9em;text-align:center;margin:30px 0 10px;color:var(--accent);text-shadow:0 0 15px var(--glow);transition:all 1.8s;}.subtitle,.controls input,.controls select,.tag-pill,.clear-btn,.door .caption,.footer a{color:var(--accent);transition:all 1.8s;}.controls input,.controls select,.clear-btn{border-color:var(--accent);}canvas{opacity:0.3;transition:opacity 1.8s;}.tag{background:rgba(0,0,0,0.65);transition:all 1s;}.controls{max-width:960px;margin:0 auto 50px;text-align:center;}input,select{background:rgba(28,35,51,0.9);padding:14px 18px;border:2px solid var(--accent);border-radius:12px;font-size:1.2em;margin:10px;}input{width:340px;}.active-tags{margin:20px auto;display:flex;flex-wrap:wrap;gap:10px;justify-content:center;}.tag-pill{background:var(--accent);color:#0b0e1a;padding:8px 16px;border-radius:20px;font-size:0.95em;cursor:pointer;}.clear-btn{background:transparent;padding:8px 16px;border:1px solid var(--accent);border-radius:20px;cursor:pointer;font-size:0.9em;}.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:34px;max-width:1440px;margin:auto;padding:20px;}.door{position:relative;overflow:hidden;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.9);transition:all .4s;}.door:hover{transform:translateY(-14px);box-shadow:0 20px 50px rgba(0,0,0,0.95);}.door img{width:100%;display:block;opacity:0.92;transition:opacity .4s;}.door:hover img{opacity:1;}.caption{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,#0b0e1aee);padding:60px 20px 18px;color:var(--accent);font-size:1.35em;text-align:center;text-shadow:0 0 12px #000;}.tags{position:absolute;top:12px;left:12px;display:flex;gap:6px;flex-wrap:wrap;opacity:0;transition:opacity .3s;}.door:hover .tags{opacity:1;}.tag{padding:4px 10px;border-radius:12px;font-size:0.8em;}.noresults{text-align:center;padding:100px;font-size:1.6em;opacity:0.7;}footer{text-align:center;margin:100px 0 40px;font-size:0.95em;opacity:0.8;}
</style>
</head>
<body>
<audio id="creak" src="creak.mp3" preload="auto"></audio><canvas id="particles"></canvas><h1 id="maintitle">Jetaime’s Cabinet of Possibilities</h1><p class="subtitle">Every door you ever opened lives here forever.</p><div class="controls"><input type="text" id="search" placeholder="Search moods, dates, words…" autocomplete="off"><select id="yearFilter"><option value="">All Years</option></select></div><div class="active-tags" id="activeTags"></div><div class="gallery" id="gallery"></div><div class="noresults" id="noresults" style="display:none;">No doors match… whisper another word to the Cabinet.</div><footer>Eternal archive • living colour • type <em>cabinet</em> anywhere for a secret • <a href="https://ko-fi.com/jetaimes">keep the candles lit</a></footer><script>const tagThemes={default:{bg:"#0b0e1a",grad:"#121525",accent:"#b89f6e",particle:"184,159,110"},winter:{bg:"#0b1a24",grad:"#14283a",accent:"#a8c4d8",particle:"168,196,216"},snow:{bg:"#0f1a22",grad:"#1e2f38",accent:"#d8e8f0",particle:"200,230,255"},ocean:{bg:"#0f1820",grad:"#1a2a38",accent:"#88a8c0",particle:"140,180,220"},pearl:{bg:"#13181e",grad:"#242d38",accent:"#e8e0d8",particle:"232,224,216"},gothic:{bg:"#0a0a12",grad:"#161620",accent:"#b89f6e",particle:"184,159,110"},midnight:{bg:"#080812",grad:"#101020",accent:"#b89f6e",particle:"184,159,110"},gold:{bg:"#1a1408",grad:"#2a2410",accent:"#e8c070",particle:"232,192,112"},victorian:{bg:"#120d0a",grad:"#241a14",accent:"#c0a878",particle:"192,168,120"},cozy:{bg:"#1a1208",grad:"#2a1f14",accent:"#d89f70",particle:"216,159,112"},candle:{bg:"#1a1408",grad:"#2c200c",accent:"#f0c080",particle:"240,192,128"},smoke:{bg:"#14181c",grad:"#202832",accent:"#a8a8b0",particle:"168,168,180"},christmas:{bg:"#0a1a0a",grad:"#143214",accent:"#d0a878",particle:"208,168,120"}};const tagDatabase={"2025-11-30.html":["gothic","midnight","gold","victorian","library","owl","christmas carol","smoke","candle"],"2025-02-04.html":["ocean","misty","pearl","veil","fog","silver","serene","lace","breath"],"2025-11-24.html":["winter","warm","cottage","glow","lantern","cozy","firelight","hermit"],"2025-11-21.html":["snow","cream","pearl","lux","dog","whimsy","vintage","carousel"],"2025-11-20.html":["thanksgiving","rust","pie","roast","autumn","feast","cream","green"],"2021-12-19.html":["gothic","midnight","gold","victorian","library","owl","christmas carol","smoke","candle"]};let allDoors=[];let activeTagList=[];let currentParticleColor="184,159,110";async function loadDoors(){try{const resp=await fetch(".");const html=await resp.text();const doc=new DOMParser().parseFromString(html,"text/html");const links=[...doc.querySelectorAll('a[href$=".html"]')].map(a=>a.getAttribute('href')).filter(h=>/^\d{4}-\d{2}-\d{2}\.html$/.test(h)).sort((a,b)=>b.localeCompare(a));return links.map(file=>{const date=file.replace('.html','');const[y,m,d]=date.split('-');const monthName=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][+m];const display=`${+d} ${monthName} ${y}`;const img=`https://files.catbox.moe/${file.split('.')[0].replace(/-/g,'').slice(-10)}.jpg`;const tags=tagDatabase[file]||[];return{file,date,display,year:y,img,tags};});}catch(e){console.error("Archive load error:",e);return[];}}function applyTheme(){const theme=activeTagList.length>0&&tagThemes[activeTagList[0]]?tagThemes[activeTagList[0]]:tagThemes.default;document.documentElement.style.setProperty('--bg',theme.bg);document.documentElement.style.setProperty('--grad',theme.grad);document.documentElement.style.setProperty('--accent',theme.accent);document.documentElement.style.setProperty('--glow',theme.particle.split(',').map((c,i)=>i<3?parseInt(c)*0.8:0.4).join(',')+')');currentParticleColor=theme.particle;const t=document.getElementById("maintitle");if(activeTagList.length===0)t.innerHTML="Jetaime’s Cabinet of Possibilities";else t.innerHTML=activeTagList.map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" & ")+" doors…";}const canvas=document.getElementById("particles");const ctx=canvas.getContext("2d");canvas.width=innerWidth;canvas.height=innerHeight;let p=[];for(let i=0;i<110;i++)p.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2.5+0.5,s:Math.random()*0.8+0.2,o:Math.random()*0.5+0.1});function drift(){ctx.clearRect(0,0,canvas.width,canvas.height);const[r,g,b]=currentParticleColor.split(',');p.forEach(e=>{ctx.beginPath();ctx.arc(e.x,e.y,e.r,0,Math.PI*2);ctx.fillStyle=`rgba(${r},${g},${b},${e.o})`;ctx.fill();e.y-=e.s;if(e.y<-10){e.y=canvas.height+10;e.x=Math.random()*canvas.width;}e.x+=Math.sin(e.y/80)*0.7;});requestAnimationFrame(drift);}drift();function render(doors){const gallery=document.getElementById("gallery");gallery.innerHTML="";if(doors.length===0){document.getElementById("noresults").style.display="block";return;}document.getElementById("noresults").style.display="none";doors.forEach(d=>{const div=document.createElement("div");div.className="door";const tagHTML=d.tags.map(t=>`<span class="tag">${t}</span>`).join('');div.innerHTML=`<a href="${d.file}"><img src="${d.img}" alt="${d.display}" loading="lazy" onerror="this.src='https://files.catbox.moe/default.jpg'"><div class="caption">${d.display}</div><div class="tags">${tagHTML}</div></a>`;div.querySelector("a").addEventListener("click",()=>document.getElementById("creak").play());div.querySelectorAll(".tag").forEach(span=>{span.style.cursor="pointer";span.onclick=e=>{e.preventDefault();e.stopPropagation();addTagFilter(span.textContent);};});gallery.appendChild(div);});}function addTagFilter(tag){if(activeTagList.includes(tag))return;activeTagList.push(tag);updateActiveTagsUI();filter();applyTheme();}function removeTagFilter(tag){activeTagList=activeTagList.filter(t=>t!==tag);updateActiveTagsUI();filter();applyTheme();}function updateActiveTagsUI(){const container=document.getElementById("activeTags");if(activeTagList.length===0){container.innerHTML="";applyTheme();return;}container.innerHTML=activeTagList.map(t=>`<span class="tag-pill">${t} ×</span>`).join('')+`<button class="clear-btn" onclick="activeTagList=[];updateActiveTagsUI();filter();applyTheme()">Clear all</button>`;container.querySelectorAll(".tag-pill").forEach((pill,i)=>pill.onclick=()=>removeTagFilter(activeTagList[i]));}function filter(){let filtered=allDoors;const term=document.getElementById("search").value.toLowerCase();const year=document.getElementById("yearFilter").value;if(year)filtered=filtered.filter(d=>d.year===year);if(term)filtered=filtered.filter(d=>d.display.toLowerCase().includes(term)||d.tags.some(t=>t.toLowerCase().includes(term)));if(activeTagList.length>0)filtered=filtered.filter(d=>activeTagList.every(t=>d.tags.includes(t)));render(filtered);}loadDoors().then(doors=>{allDoors=doors;const years=[...new Set(doors.map(d=>d.year))].sort().reverse();const select=document.getElementById("yearFilter");years.forEach(y=>{const opt=document.createElement("option");opt.value=y;opt.textContent=y;select.appendChild(opt);});render(doors);});document.getElementById("search").addEventListener("input",filter);document.getElementById("yearFilter").addEventListener("change",filter);window.addEventListener("resize",()=>{canvas.width=innerWidth;canvas.height=innerHeight;});let keys="";document.addEventListener("keydown",e=>{keys=(keys+e.key).slice(-7);if(keys==="cabinet"){document.body.style.filter="brightness(1.9) sepia(0.5)";setTimeout(()=>document.body.style.filter="",3000);}});
</script>
</body>
</html>
